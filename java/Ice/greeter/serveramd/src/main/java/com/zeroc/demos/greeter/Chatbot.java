// Copyright (c) ZeroC, Inc.

package com.zeroc.demos.greeter;

import com.zeroc.demos.VisitorCenter.Greeter;
import com.zeroc.Ice.Current;
import java.util.concurrent.CompletableFuture;
import java.util.concurrent.CompletionStage;
import java.util.concurrent.TimeUnit;

/**
 * Chatbot is an Ice servant that implements Slice interface Greeter.
 */
class Chatbot implements Greeter
{
    // Implements the abstract method 'greetAsync' from the Greeter interface generated by the Slice compiler.
    // This variant is the asynchronous implementation.
    public CompletionStage<String> greetAsync(String name, Current current) {
        System.out.println("Dispatching greet request { name = '" + name + "' }");

        return CompletableFuture.supplyAsync(
            () -> "Hello, " + name + "!",
            CompletableFuture.delayedExecutor(1, TimeUnit.SECONDS)
        );
    }
}
